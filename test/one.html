<!doctype html>
<html>
    <head>
        <title>Parser Test Suite Page</title>
        <style>
            input+span:hover { border-bottom: 1px solid red; cursor: pointer; }
            #cfg-menu { position: fixed; top:0; left: 0; background-color: white; }
            div { font-size: 11px; font-family: monospace; }
            .red { background-color: red; color: white; }
            .green { background-color: green; color: white; }
            hr { margin: 0; padding: 0; font-size: 1px; }
        </style>
    </head>
    <body>
    (c) qfox.nl<br/>
    Testing parser:<br/>
    <script src="../src/uni.js"></script>
    <script src="../src/tok.js"></script>
    <script src="../src/par.js"></script>
    <script>
      var s = "hi; // moo\r\n;";
      console.warn("Parsing:", [s]);

      var p = new Par(s, {
        functionMode: false,
        regexNoClassEscape: false,
        saveTokens: true,
      });

      try {
        p.run();
        console.log('Parsed ok.');
      } finally {
        console.log('window.p:',p);
        console.log('window.p.tok.tokens:',p.tok.tokens);
        console.log(p.tok.tokens.map(function(t){
          var c = t.value.charCodeAt(0);
          if (t.value.length === 1 && (c <= 20 || c >= 127)) return Tok[t.type]+'[\\x'+(c<16?0:'')+c.toString(16)+'].'+ t.value.length;
          return Tok[t.type]+'['+ t.value+'].'+ t.value.length;
        }));
        console.log('tokenCountAll:', p.tok.tokenCountAll);
      }
    </script>
